<template>
  <CustomBreadcrumb :items="[
    { label: 'Home', icon: 'HomeIcon', to: '/' },
    { label: 'Business I18n ', icon: 'UsersIcon', to: '/business_i18n' }
  ]" title="‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" />
  <div class="container-fluid">
    <pre>
      {{ errors }}
    </pre>
    <div class="row justify-content-center w-100">
      <div class="col-lg-12">
        <div class="card shadow-sm">
          <div class="card-header bg-info text-white">
            <h2 class="card-title mb-0">
              <i class="fas fa-building me-2"></i>
              ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡πÉ‡∏´‡∏°‡πà - Create New Business
            </h2>
          </div>
          <div class="card-body">
            <form @submit.prevent="submitForm" novalidate>
              <!-- Service & Business Type Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-cogs me-2"></i>
                  ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
                </h3>
                <div class="row">
                  <div class="col-md-4">
                    <label class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ <span class="text-danger">*</span></label>
                    <!-- <select
                      v-model="form.service_type_id"
                      class="form-select"
                      :class="{ 'is-invalid': errors.service_type_id }"
                      required
                    >
                      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</option>
                      <option value="56050013-a67b-40f8-b6ca-d0675d840804">‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                      <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                    </select> -->
                    <CustomSelect v-model="form.service_type_id" :class="{ 'is-invalid': errors.service_type_id }"
                      placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£" :options="[
                        { label: '56050013-a67b-40f8-b6ca-d0675d840804', value: '‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£' },
                        { label: '‰∏≠otherÊñá', value: '‡∏≠‡∏∑‡πà‡∏ô‡πÜ' },
                      ]" label-field="label" value-field="value" />
                    <div class="invalid">{{ errors.service_type_id }}</div>
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à <span class="text-danger">*</span></label>
                    <!-- <select
                      v-model="form.business_type_id"
                      class="form-select"
                      :class="{ 'is-invalid': errors.business_type_id }"
                      required
                    >
                      <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à</option>
                      <option value="0e7ebeb2-398d-40fd-9df6-2365a2a0f149">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                      <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                    </select> -->
                    <CustomSelect v-model="form.business_type_id" :class="{ 'is-invalid': errors.business_type_id }"
                      placeholder="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" :options="[
                        { label: '‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£', value: '0e7ebeb2-398d-40fd-9df6-2365a2a0f149' },
                        { label: '‡∏≠‡∏∑‡πà‡∏ô‡πÜ', value: 'other' },
                      ]" label-field="label" value-field="value" />
                    <div class="invalid" v-if="errors.business_type_id">{{ errors.business_type_id }}</div>
                  </div>
                  <div class="col-md-4">
                    <label class="form-label">‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à <span class="text-danger">*</span></label>
                    <!-- <select v-model="form.business_model_id" class="form-select"
                      :class="{ 'is-invalid': errors.business_model_id }" required>
           
                      <option value="6ce4c318-7c60-4951-acb4-e001107f9013">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏õ‡∏•‡∏µ‡∏Å</option>
                      <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                    </select>
                    <div class="invalid" v-if="errors.business_model_id">{{ errors.business_model_id }}</div> -->
                    <CustomSelect v-model="form.business_model_id" :class="{ 'is-invalid': errors.business_model_id }"
                      placeholder="‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" :options="[
                        { label: '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à', value: '' },
                        { label: '‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£', value: '0e7ebeb2-398d-40fd-9df6-2365a2a0f149' },
                        { label: '‡∏≠‡∏∑‡πà‡∏ô‡πÜ', value: 'other' },
                      ]" label-field="label" value-field="value" />
                    <div class="invalid" v-if="errors.business_model_id">{{ errors.business_model_id }}</div>
                  </div>
                </div>
              </div>

              <!-- Business Information Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-building me-2"></i>
                  ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó
                </h3>
                <!-- <div class="language-tabs">
                  <div v-for="lang in languages" :key="lang.code" class="language-tab"
                    :class="{ active: currentLang === lang.code }" @click="currentLang = lang.code">
                    {{ lang.name }}
                  </div>
                </div> -->
                <div class="w-100 language-tabs">
                  <!-- <select v-model="currentLang" class="form-select" required>
                    <option value="" disabled>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏†‡∏≤‡∏©‡∏≤</option>
                    <option v-for="lang in languages" :key="lang.code" :value="lang.code">
                      {{ lang.name }}
                    </option>
                  </select> -->
                  <CustomSelect v-model="currentLang" placeholder="‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" :options="languages" label-field="name"
                    value-field="code" />

                </div>

                <div class="row">
                  <div class="col-md-6">
                    <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó <span class="text-danger">*</span></label>
                    <input v-model="form.business_name[currentLang]" type="text" class="form-control"
                      :class="{ 'is-invalid': errors.business_name }" :placeholder="getPlaceholder('business_name')"
                      required />
                    <div class="invalid" v-if="errors.business_name">{{ errors.business_name }}</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ <span class="text-danger">*</span></label>
                    <input v-model="form.business_person[currentLang]" type="text" class="form-control"
                      :class="{ 'is-invalid': errors.business_person }" :placeholder="getPlaceholder('business_person')"
                      required />
                    <div class="invalid" v-if="errors.business_person">{{ errors.business_person }}</div>
                  </div>
                </div>

                <div class="row mt-3">
                  <div class="col-md-12">
                    <label class="form-label">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó <span class="text-danger">*</span></label>
                    <textarea v-model="form.business_address[currentLang]" class="form-control"
                      :class="{ 'is-invalid': errors.business_address }" rows="3"
                      :placeholder="getPlaceholder('business_address')" required></textarea>
                    <div class="invalid" v-if="errors.business_address">{{ errors.business_address }}</div>
                  </div>
                </div>

                <div class="row mt-3">
                  <div class="col-md-6">
                    <label class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ <span class="text-danger">*</span></label>
                    <input v-model="form.business_contact[currentLang]" type="text" class="form-control"
                      :class="{ 'is-invalid': errors.business_contact }"
                      :placeholder="getPlaceholder('business_contact')" required />
                    <div class="invalid" v-if="errors.business_contact">{{ errors.business_contact }}</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">‡∏≠‡∏µ‡πÄ‡∏°‡∏• <span class="text-danger">*</span></label>
                    <input v-model="form.business_email[currentLang]" type="email" class="form-control"
                      :class="{ 'is-invalid': errors.business_email }" :placeholder="getPlaceholder('business_email')"
                      required />
                    <div class="invalid" v-if="errors.business_email">{{ errors.business_email }}</div>
                  </div>
                </div>
              </div>

              <!-- Shop Information Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-store me-2"></i>
                  ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤
                </h3>
                <div class="row">
                  <div class="col-md-6">
                    <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô <span class="text-danger">*</span></label>
                    <input v-model="form.shop_name[currentLang]" type="text" class="form-control"
                      :class="{ 'is-invalid': errors.shop_name }" :placeholder="getPlaceholder('shop_name')" required />
                    <div class="invalid" v-if="errors.shop_name">{{ errors.shop_name }}</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡πâ‡∏≤‡∏ô <span class="text-danger">*</span></label>
                    <input v-model="form.shop_phone[currentLang]" type="text" class="form-control"
                      :class="{ 'is-invalid': errors.shop_phone }" :placeholder="getPlaceholder('shop_phone')"
                      required />
                    <div class="invalid" v-if="errors.shop_phone">{{ errors.shop_phone }}</div>
                  </div>
                </div>

                <div class="row mt-3">
                  <div class="col-md-12">
                    <label class="form-label">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏£‡πâ‡∏≤‡∏ô <span class="text-danger">*</span></label>
                    <textarea v-model="form.shop_address[currentLang]" class="form-control"
                      :class="{ 'is-invalid': errors.shop_address }" rows="3"
                      :placeholder="getPlaceholder('shop_address')" required></textarea>
                    <div class="invalid" v-if="errors.shop_address">{{ errors.shop_address }}</div>
                  </div>
                </div>

                <div class="row mt-3">
                  <div class="col-md-6">
                    <label class="form-label">‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ <span class="text-danger">*</span></label>
                    <input v-model="form.shop_time[currentLang]" type="text" class="form-control"
                      :class="{ 'is-invalid': errors.shop_time }" placeholder="08:00 - 18:00" required />
                    <div class="invalid" v-if="errors.shop_time">{{ errors.shop_time }}</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡πâ‡∏≤‡∏ô <span class="text-danger">*</span></label>
                    <input v-model="form.shop_details[currentLang]" type="text" class="form-control"
                      :class="{ 'is-invalid': errors.shop_details }" :placeholder="getPlaceholder('shop_details')"
                      required />
                    <div class="invalid" v-if="errors.shop_details">{{ errors.shop_details }}</div>
                  </div>
                </div>

                <div class="row mt-3">
                  <div class="col-md-6">
                    <label class="form-label">‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î <span class="text-danger">*</span></label>
                    <input v-model="form.latitude" type="number" class="form-control"
                      :class="{ 'is-invalid': errors.latitude }" step="0.000001" placeholder="13.2" required />
                    <div class="invalid" v-if="errors.latitude">{{ errors.latitude }}</div>
                  </div>
                  <div class="col-md-6">
                    <label class="form-label">‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î <span class="text-danger">*</span></label>
                    <input v-model="form.longitude" type="number" class="form-control"
                      :class="{ 'is-invalid': errors.longitude }" step="0.000001" placeholder="13.2" required />
                    <div class="invalid" v-if="errors.longitude">{{ errors.longitude }}</div>
                  </div>
                </div>
              </div>

              <!-- Images Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-images me-2"></i>
                  ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
                </h3>
                <!-- ‡∏£‡∏π‡∏õ‡∏õ‡∏Å -->
                <div class="row">
                  
                  <div class="col-md-6">
                    {{ errors?.image_cover }}
                    <label class="form-label">‡∏£‡∏π‡∏õ‡∏õ‡∏Å <span class="text-danger">*</span></label>
                    <CustomUpload v-model="form.image_cover" :multiple="false" accept="image/*" label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏õ‡∏Å" />
                    <div class="invalid" >{{ errors?.image_cover || "" }}</div>
                  </div>
                  <!-- ‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå -->
                  <div class="col-md-6">
                    <label class="form-label">‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå <span class="text-danger">*</span></label>
                    <CustomUpload v-model="form.image_profile" :multiple="false" accept="image/*"
                      label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå" />
                    <div class="invalid" v-if="errors.image_profile">{{ errors.image_profile }}</div>
                  </div>
                </div>
                <!-- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à -->
                <div class="mt-4">
                  <label class="form-label">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à <span class="text-danger">*</span></label>
                  <CustomUpload v-model="form.business_img" :multiple="true" accept="image/*"
                    label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏π‡∏õ)" />
                  <div class="invalid" v-if="errors.business_img">{{ errors.business_img }}</div>
                </div>
                <!-- ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à -->
                <div class="mt-4">
                  <label class="form-label">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à <span class="text-danger">*</span></label>
                  <CustomUpload v-model="form.business_documents" :multiple="true" accept="image/*,.pdf,.doc,.docx"
                    label="‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à" />
                  <div class="invalid " v-if="errors.business_documents">{{ errors.business_documents
                  }}</div>
                </div>
              </div>

              <!-- Business List Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-list me-2"></i>
                  ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
                </h3>
                <div v-for="(item, index) in businessList" :key="index" class="business-list-item">
                  <div class="row">
                    <div class="col-md-8">
                      <label class="form-label">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ <span class="text-danger">*</span></label>
                      <input v-model="item.name[currentLang]" type="text" class="form-control"
                        :placeholder="getPlaceholder('product_name')" required />
                    </div>
                    <div class="col-md-4">
                      <label class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤ <span class="text-danger">*</span></label>
                      <input v-model="item.price" type="number" class="form-control" placeholder="‡∏£‡∏≤‡∏Ñ‡∏≤" required />
                    </div>
                  </div>
                  <div class="mt-2">
                    <button v-if="businessList.length > 1" type="button" class="btn btn-danger btn-sm"
                      @click="removeBusinessItem(index)">
                      ‡∏•‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                    </button>
                  </div>
                </div>
                <button type="button" class="btn btn-secondary" @click="addBusinessItem">
                  <i class="fas fa-plus me-2"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                </button>
              </div>

              <!-- Social Media Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-share-alt me-2"></i>
                  ‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢
                </h3>
                <div v-for="(social, index) in socialMedia" :key="index" class="social-media-item">
                  <div class="row">
                    <div class="col-md-4">
                      <label class="form-label">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏• <span class="text-danger">*</span></label>
                      <select v-model="social.type" class="form-select" required>
                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
                        <option value="8eb5b102-4c6c-445b-9cb9-b52f3cf4fb01">Facebook</option>
                        <option value="instagram">Instagram</option>
                        <option value="line">Line</option>
                        <option value="twitter">Twitter</option>
                      </select>
                    </div>
                    <div class="col-md-8">
                      <label class="form-label">‡∏•‡∏¥‡∏á‡∏Å‡πå <span class="text-danger">*</span></label>
                      <input v-model="social.link[currentLang]" type="url" class="form-control"
                        :placeholder="getSocialPlaceholder(currentLang)" required />
                    </div>
                  </div>
                  <div class="mt-2">
                    <button v-if="socialMedia.length > 1" type="button" class="btn btn-danger btn-sm"
                      @click="removeSocialItem(index)">
                      ‡∏•‡∏ö‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•
                    </button>
                  </div>
                </div>
                <button type="button" class="btn btn-secondary" @click="addSocialItem">
                  <i class="fas fa-plus me-2"></i>‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•
                </button>
              </div>

              <!-- Open Days Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-calendar me-2"></i>
                  ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£
                </h3>
                <div class="row">
                  <div class="col-md-12">
                    <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ <span class="text-danger">*</span></label>
                    <div v-for="day in weekDays" :key="day.value" class="day-checkbox">
                      <input v-model="form.open_days" type="checkbox" :value="day.value" class="form-check-input"
                        :id="day.value" />
                      <label :for="day.value" class="form-check-label">
                        {{ day.label }}
                      </label>
                    </div>
                    <div class="invalid" v-if="errors.open_days">{{ errors.open_days }}</div>
                  </div>
                </div>
              </div>

              <!-- Status Section -->
              <div class="form-section">
                <h3 class="section-title">
                  <i class="fas fa-toggle-on me-2"></i>
                  ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
                </h3>
                <div class="form-check form-switch">
                  <input v-model="form.status" class="form-check-input" type="checkbox" id="status" />
                  <label class="form-check-label" for="status">
                    ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
                  </label>
                </div>
              </div>

              <!-- Submit Section -->
              <div class="submit-section">
                <button type="submit" class="btn btn-primary btn-lg">
                  <i class="fas fa-save me-2"></i>
                  ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à
                </button>
                <button type="button" class="btn btn-secondary btn-lg ms-3" @click="resetForm">
                  <i class="fas fa-redo me-2"></i>
                  ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script setup>
import { ref, reactive, computed } from 'vue'

// Language settings
const currentLang = ref('th')
const languages = [
  { code: "th", name: "üáπüá≠ ‡πÑ‡∏ó‡∏¢" },
  { code: "en", name: "üá∫üá∏ English" },
  { code: "cn", name: "üá®üá≥ ‰∏≠Êñá" },
];

// Week days with i18n mapping
const weekDays = [
  {
    value: 'monday',
    label: '‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå (Monday)',
    i18n: {
      th: "‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå",
      en: "Monday",
      cn: "ÊòüÊúü‰∏Ä"
    }
  },
  {
    value: 'tuesday',
    label: '‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£ (Tuesday)',
    i18n: {
      th: "‡∏≠‡∏±‡∏á‡∏Ñ‡∏≤‡∏£",
      en: "Tuesday",
      cn: "ÊòüÊúü‰∫å"
    }
  },
  {
    value: 'wednesday',
    label: '‡∏û‡∏∏‡∏ò (Wednesday)',
    i18n: {
      th: "‡∏û‡∏∏‡∏ò",
      en: "Wednesday",
      cn: "ÊòüÊúü‰∏â"
    }
  },
  {
    value: 'thursday',
    label: '‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ (Thursday)',
    i18n: {
      th: "‡∏û‡∏§‡∏´‡∏±‡∏™‡∏ö‡∏î‡∏µ",
      en: "Thursday",
      cn: "ÊòüÊúüÂõõ"
    }
  },
  {
    value: 'friday',
    label: '‡∏®‡∏∏‡∏Å‡∏£‡πå (Friday)',
    i18n: {
      th: "‡∏®‡∏∏‡∏Å‡∏£‡πå",
      en: "Friday",
      cn: "ÊòüÊúü‰∫î"
    }
  },
  {
    value: 'saturday',
    label: '‡πÄ‡∏™‡∏≤‡∏£‡πå (Saturday)',
    i18n: {
      th: "‡πÄ‡∏™‡∏≤‡∏£‡πå",
      en: "Saturday",
      cn: "ÊòüÊúüÂÖ≠"
    }
  },
  {
    value: 'sunday',
    label: '‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå (Sunday)',
    i18n: {
      th: "‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå",
      en: "Sunday",
      cn: "ÊòüÊúüÊó•"
    }
  }
]

// Form data
const form = reactive({
  service_type_id: '',
  business_type_id: '',
  business_model_id: '',
  business_name: { th: '', en: '', cn: '' },
  business_person: { th: '', en: '', cn: '' },
  business_address: { th: '', en: '', cn: '' },
  business_contact: { th: '', en: '', cn: '' },
  business_email: { th: '', en: '', cn: '' },
  shop_name: { th: '', en: '', cn: '' },
  shop_phone: { th: '', en: '', cn: '' },
  shop_address: { th: '', en: '', cn: '' },
  shop_time: { th: '', en: '', cn: '' },
  shop_details: { th: '', en: '', cn: '' },
  latitude: '',
  longitude: '',
  image_cover: null,
  image_profile: null,
  business_img: null,
  business_documents: null,
  open_days: [],
  status: true
})

// Business list
const businessList = ref([
  {
    name: { th: '', en: '', cn: '' },
    price: ''
  }
])

// Social media
const socialMedia = ref([
  {
    type: '',
    link: { th: '', en: '', cn: '' }
  }
])

// Computed errors - ‡∏à‡∏∞‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô
const errors = computed(() => {
  const validationErrors = {}

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö field ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
  const mustFields = ['service_type_id', 'business_type_id', 'business_model_id']
  mustFields.forEach(field => {
    if (!form[field]) {
      validationErrors[field] = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏ô‡∏µ‡πâ'
    }
  })

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö business_name ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.business_name.th || form.business_name.th.trim() === '') {
    validationErrors.business_name = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö business_person ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.business_person.th || form.business_person.th.trim() === '') {
    validationErrors.business_person = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö business_address ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.business_address.th || form.business_address.th.trim() === '') {
    validationErrors.business_address = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö business_contact ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.business_contact.th || form.business_contact.th.trim() === '') {
    validationErrors.business_contact = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö business_email ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.business_email.th || form.business_email.th.trim() === '') {
    validationErrors.business_email = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  } else {
    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/
    if (!emailRegex.test(form.business_email.th)) {
      validationErrors.business_email = '‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á'
    }
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö shop_name ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.shop_name.th || form.shop_name.th.trim() === '') {
    validationErrors.shop_name = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö shop_phone ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.shop_phone.th || form.shop_phone.th.trim() === '') {
    validationErrors.shop_phone = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡πâ‡∏≤‡∏ô (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö shop_address ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.shop_address.th || form.shop_address.th.trim() === '') {
    validationErrors.shop_address = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏£‡πâ‡∏≤‡∏ô (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö shop_time ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.shop_time.th || form.shop_time.th.trim() === '') {
    validationErrors.shop_time = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö shop_details ‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢
  if (!form.shop_details.th || form.shop_details.th.trim() === '') {
    validationErrors.shop_details = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡πâ‡∏≤‡∏ô (‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢)'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö latitude
  if (!form.latitude) {
    validationErrors.latitude = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î'
  } else if (form.latitude < -90 || form.latitude > 90) {
    validationErrors.latitude = '‡∏•‡∏∞‡∏ï‡∏¥‡∏à‡∏π‡∏î‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á -90 ‡∏ñ‡∏∂‡∏á 90'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö longitude
  if (!form.longitude) {
    validationErrors.longitude = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î'
  } else if (form.longitude < -180 || form.longitude > 180) {
    validationErrors.longitude = '‡∏•‡∏≠‡∏á‡∏à‡∏¥‡∏à‡∏π‡∏î‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á -180 ‡∏ñ‡∏∂‡∏á 180'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
  if (!form.image_cover) {
    validationErrors.image_cover = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏õ‡∏Å'
  }

  if (!form.image_profile) {
    validationErrors.image_profile = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå'
  }

  if (!form.business_img || (form.business_img && form.business_img.length === 0)) {
    validationErrors.business_img = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏π‡∏õ'
  }

  if (!form.business_documents || (form.business_documents && form.business_documents.length === 0)) {
    validationErrors.business_documents = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡πÑ‡∏ü‡∏•‡πå'
  }

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£
  businessList.value.forEach((item, index) => {
    if (!item.name.th || item.name.th.trim() === '') {
      validationErrors[`business_list_${index}`] = `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ${index + 1}`
    }

    if (!item.price || item.price <= 0) {
      validationErrors[`business_list_price_${index}`] = `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ${index + 1}`
    }
  })

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡∏°‡∏µ‡πÄ‡∏î‡∏µ‡∏¢
  socialMedia.value.forEach((item, index) => {
    if (!item.type) {
      validationErrors[`social_media_type_${index}`] = `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ${index + 1}`
    }

    if (!item.link.th || item.link.th.trim() === '') {
      validationErrors[`social_media_link_${index}`] = `‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ${index + 1}`
    } else {
      // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö URL
      const urlRegex = /^https?:\/\/.+/
      if (!urlRegex.test(item.link.th)) {
        validationErrors[`social_media_link_${index}`] = `‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö URL ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà ${index + 1}`
      }
    }
  })

  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£
  if (form.open_days.length === 0) {
    validationErrors.open_days = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ß‡∏±‡∏ô'
  }

  return validationErrors
})

// Computed ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
const isFormValid = computed(() => {
  return Object.keys(errors.value).length === 0
})

// Helper functions
const getPlaceholder = (field) => {
  const placeholders = {
    th: {
      business_name: '‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó',
      business_person: '‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠',
      business_address: '‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó',
      business_contact: '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠',
      business_email: '‡∏≠‡∏µ‡πÄ‡∏°‡∏•',
      shop_name: '‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô',
      shop_phone: '‡πÄ‡∏ö‡∏≠‡∏£‡πå‡∏£‡πâ‡∏≤‡∏ô',
      shop_address: '‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏£‡πâ‡∏≤‡∏ô',
      shop_details: '‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡πâ‡∏≤‡∏ô',
      product_name: '‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤/‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£'
    },
    en: {
      business_name: 'Company Name',
      business_person: 'Contact Person',
      business_address: 'Company Address',
      business_contact: 'Contact Number',
      business_email: 'Email',
      shop_name: 'Shop Name',
      shop_phone: 'Shop Phone',
      shop_address: 'Shop Address',
      shop_details: 'Shop Details',
      product_name: 'Product/Service Name'
    },
    cn: {
      business_name: 'ÂÖ¨Âè∏ÂêçÁß∞',
      business_person: 'ËÅîÁ≥ª‰∫∫',
      business_address: 'ÂÖ¨Âè∏Âú∞ÂùÄ',
      business_contact: 'ËÅîÁ≥ªÁîµËØù',
      business_email: 'ÈÇÆÁÆ±',
      shop_name: 'ÂïÜÂ∫óÂêçÁß∞',
      shop_phone: 'ÂïÜÂ∫óÁîµËØù',
      shop_address: 'ÂïÜÂ∫óÂú∞ÂùÄ',
      shop_details: 'ÂïÜÂ∫óËØ¶ÊÉÖ',
      product_name: '‰∫ßÂìÅ/ÊúçÂä°ÂêçÁß∞'
    }
  }
  return placeholders[currentLang.value]?.[field] || ''
}

const getSocialPlaceholder = (lang) => {
  const placeholders = {
    th: 'https://facebook.com/mypage',
    en: 'https://facebook.com/mypage-en',
    cn: 'https://facebook.com/mypage-cn'
  }
  return placeholders[lang] || placeholders.th
}

// Business list management
const addBusinessItem = () => {
  businessList.value.push({
    name: { th: '', en: '', cn: '' },
    price: ''
  })
}

const removeBusinessItem = (index) => {
  if (businessList.value.length > 1) {
    businessList.value.splice(index, 1)
  }
}

// Social media management
const addSocialItem = () => {
  socialMedia.value.push({
    type: '',
    link: { th: '', en: '', cn: '' }
  })
}

const removeSocialItem = (index) => {
  if (socialMedia.value.length > 1) {
    socialMedia.value.splice(index, 1)
  }
}

// Submit form
const submitForm = async () => {
  if (!isFormValid.value) {
    console.log('Form validation failed:', errors.value)
    return
  }

  try {
    const formData = new FormData()

    // Basic fields
    formData.append('service_type_id', form.service_type_id)
    formData.append('business_type_id', form.business_type_id)
    formData.append('business_model_id', form.business_model_id)

    // I18n fields
    formData.append('business_name_i18n', JSON.stringify(form.business_name))
    formData.append('business_person_i18n', JSON.stringify(form.business_person))
    formData.append('business_address_i18n', JSON.stringify(form.business_address))
    formData.append('business_contact_i18n', JSON.stringify(form.business_contact))
    formData.append('business_email_i18n', JSON.stringify(form.business_email))
    formData.append('shop_name_i18n', JSON.stringify(form.shop_name))
    formData.append('shop_address_i18n', JSON.stringify(form.shop_address))
    formData.append('shop_time_i18n', JSON.stringify(form.shop_time))
    formData.append('shop_phone_i18n', JSON.stringify(form.shop_phone))
    formData.append('shop_details_i18n', JSON.stringify(form.shop_details))

    // Latitude and longitude as i18n (same value for all languages)
    const latLngData = {
      th: parseFloat(form.latitude),
      en: parseFloat(form.latitude),
      cn: parseFloat(form.latitude)
    }
    const lonLngData = {
      th: parseFloat(form.longitude),
      en: parseFloat(form.longitude),
      cn: parseFloat(form.longitude)
    }
    formData.append('latitude_i18n', JSON.stringify(latLngData))
    formData.append('longitude_i18n', JSON.stringify(lonLngData))

    // Images
    if (form.image_cover) {
      formData.append('image_cover', form.image_cover)
    }
    if (form.image_profile) {
      formData.append('image_profile', form.image_profile)
    }

    // Business images (multiple)
    if (form.business_img) {
      if (form.business_img.length) {
        Array.from(form.business_img).forEach(file => {
          formData.append('business_img', file)
        })
      } else {
        formData.append('business_img', form.business_img)
      }
    }

    // Business documents (multiple)
    if (form.business_documents) {
      if (form.business_documents.length) {
        Array.from(form.business_documents).forEach(file => {
          formData.append('business_documents', file)
        })
      } else {
        formData.append('business_documents', form.business_documents)
      }
    }

    // Business list
    const businessListData = businessList.value.map(item => ({
      business_list_name_i18n: item.name,
      business_list_price_i18n: {
        th: parseFloat(item.price),
        en: parseFloat(item.price),
        cn: parseFloat(item.price)
      }
    }))
    formData.append('business_list', JSON.stringify(businessListData))

    // Social media
    const socialMediaData = socialMedia.value.map(item => ({
      social_media_id: item.type,
      social_media_link_i18n: item.link
    }))
    formData.append('business_social_media', JSON.stringify(socialMediaData))

    // Open days
    const openDaysData = form.open_days.map(dayValue => {
      const dayInfo = weekDays.find(day => day.value === dayValue)
      return {
        day_name_i18n: dayInfo.i18n
      }
    })
    formData.append('business_open_date', JSON.stringify(openDaysData))

    // Status
    formData.append('Status', form.status.toString())

    // Submit the form (replace with actual API call)
    console.log('Submitting form data:', formData)
    formData.forEach((value, key) => {
      console.log(`${key}:`, value)
    })

    alert('Form submitted successfully! Check console for data.')

  } catch (error) {
    console.error('Error submitting form:', error)
    alert('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á')
  }
}

// Reset form
const resetForm = () => {
  // Reset form data
  Object.keys(form).forEach(key => {
    if (typeof form[key] === 'object' && form[key] !== null && !Array.isArray(form[key])) {
      // Reset i18n objects
      Object.keys(form[key]).forEach(lang => {
        form[key][lang] = ''
      })
    } else if (Array.isArray(form[key])) {
      form[key] = []
    } else if (key === 'status') {
      form[key] = true
    } else {
      form[key] = key.includes('latitude') || key.includes('longitude') ? '' : ''
    }
  })

  // Reset business list
  businessList.value = [{
    name: { th: '', en: '', cn: '' },
    price: ''
  }]

  // Reset social media
  socialMedia.value = [{
    type: '',
    link: { th: '', en: '', cn: '' }
  }]

  // Reset language
  currentLang.value = 'th'
}
</script>